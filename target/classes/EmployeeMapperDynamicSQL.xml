<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cwh.mybatis.dao.EmployeeMapperDynamicSQL">
    <!--public List<Employee> getEmpsByConditionIf(Employee Employee);-->
    <select id="getEmpsByConditionIf" resultType="com.cwh.mybatis.beans.Employee">
        select * from table_employee
        <where>
            <!--
                查询的时候如果某些条件没带可能sql拼装会有问题
                1.给where后面加上1=1，以后的条件都and xxx。
                2.mybatis使用where标签来将所有的查询条件包括在内。mybatis就会将where标签中拼装的sql，多出来的and或者or去掉
                where只会去掉第一个多出来的and或者or。
            -->
        <!--
            test:判断表达式（OGNL）
            OGNL参照官方文档
                类似于 c:if test
                从参数中取值进行判断
                遇见特殊符号应该去写转义字符：
        -->
        <if test="id!=null">
          id=#{id}
        </if>
        <if test="lastName!=null &amp;&amp; lastName!=&quot;&quot;">
         and last_name like #{lastName}
        </if>
        <if test="gender==0 or gender==1 ">
         and gender=#{gender}
        </if>
        <if test="email!=null &amp;&amp; email.trim()!=&quot;&quot;">
          and email=#{email}
        </if>
        </where>
    </select>

    <!--public List<Employee> getEmpsByConditionTrim(Employee Employee);-->
    <select id="getEmpsByConditionTrim" resultType="com.cwh.mybatis.beans.Employee">
        select * from table_employee
        <!--后面多出的and或者or where标签不能解决
        prefix=""：前缀：trim标签体重是整个字符串拼串后的结果
                prefix给拼串后的整个字符串加一个前缀
        prefixOverrides="":
                前缀覆盖：去掉整个字符串前面多余的字符
        suffix="":后缀
            suffix给拼串后的整个字符串加一个后缀
        suffixOverrides=""
                后缀覆盖:去掉整个字符串后面多余的字符

        -->
        <trim
                prefix="where"
                prefixOverrides="and"
                suffixOverrides="and">
            <if test="id!=null">
                id=#{id} and
            </if>
            <if test="lastName!=null &amp;&amp; lastName!=&quot;&quot;">
                and last_name like #{lastName}
            </if>
            <if test="gender==0 or gender==1 ">
                and gender=#{gender}
            </if>
            <if test="email!=null &amp;&amp; email.trim()!=&quot;&quot;">
                and email=#{email}
            </if>
    </trim>
    </select>
</mapper>